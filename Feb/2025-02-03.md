# IT 서비스란

- 컴퓨터 기술을 이용해 기업이나 개인에게 제공하는 서비스
- 대부분의 IT 서비스는 웹이나 앱을 통해 제공된다(인터넷의 발달)
- 사용자는 클라이언트와 네트워크를 통해 서버 상의 애플리케이션을 다운받는 것
- 미국에 있는 서버에 한국 유저는 인터넷을 통해 연결하는 것!
    - ISP(KT, SKB, LGU+)가 관리하는 네트워크망 - 광케이블
    - CDN - 캐싱을 통해 국가 간 통신 중에도 빠르게 로딩이 가능하다
- 컴퓨터 사이 데이터를 주고받는 통신을 하려면 물리적 연결이 필요하다
    - 데이터 센터에선 라벨링을 통해 어떤 서버인지 구분한다
    - 가정집에선 와이파이 공유기에 케이블 연결

# 네트워크

- 컴퓨터 장치들 사이를 연결하는 기술
- **각종 통신 장비들이 서로 그물망처럼 연결되어 데이터를 교환하거나 협력하여 일할 수 있게 해주는 통신망**
- 인터넷은 전세계 작은 네트워크들이 모여 하나의 큰 네트워크를 구성한 것
- 일반적으로 LAN과 WAN으로 구성
- 공동 작업의 개념
    - 여러 기능을 유기적으로 결합하기 위해 네트워크를 활용
- **LAN(Local Area Network)**: 건물 안이나 특정 지역을 범위로 하는 네트워크
    - 주로 짧은 거리 내 컴퓨터나 주변 장치를 연결해 사용
    - 스타형 - 하나의 허브에 여러 대의 컴퓨터를 연결
    - 링형 - 개별 컴퓨터가 서로 원처럼 연결
    - 버스형 - 하나의 긴선에 컴퓨터를 포함한 모든 주변 장치 연결
- **WAN(Wide Area Network)**: 2개 이상의 랜을 연결한 것
    - 넓은 지역에서 광범위하게 통신할 때 사용
    - 별도의 네트워크 접속 형태는 없다 - 랜에서 이미 접속 형태를 정의하여 또다시 네트워크 구성할 필요가 없기 때문
    - 랜 사이 통신이 잘 이루어지도록 연결
    - ISP 사업자가 주로 관리
- **허브**: 여러 대의 컴퓨터를 연결할때 사용하는 장치
- **스위치**: MAC 주소를 기반으로 장치 간 데이터를 전달하는 장치
    - LAN 구간에서 스위칭 관련 기능
- **라우터**: 다른 컴퓨터를 찾아가기 위한 길을 제시하는 역할을 하는 장치
    - WAN 구간에서 내부와 외부 네트워크의 연결 기능
- **대역폭(bps)**: 1초당 처리할 수 있는 처리할 수 있는 데이터 양
    - **데이터 용량 * 8(바이트를 비트로 변환) / 처리 시간**
- **ISP**: 인터넷을 사용할 수 있도록 연결해주는 서비스 제공 업체
- **IDS**: 네트워크 및 시스템에서 악의적인 활동을 탐지하는 보안 시스템

# 프로토콜

- 네트워크 연결을 할 때 메시지를 주고받는 규칙
- 웹 사이트에 접속하려면 가장 먼저 웹 서버에 인사
    - 서로가 통신이 가능한 상태인지 확인
- ISO(International Organization for Standardization, 국제표준화기구)
    - OSI 7계층을 정의

# OSI 7계층

- 통신 기술이 빠르게 발전하면서 개인용 컴퓨터 역시 빠르게 보급
- 컴퓨터 간 통신을 위해 허브, 스위치, 라우터가 필요해짐
- 다양한 제조사를 위한 표준을 제시하고자 함
- 통신이 일어나는 과정을 단계별로 확인할 수 있다
- 통신에 문제가 발생했을 때 원인 파악 및 해결이 쉽다
- 응용 계층 - 사용자와 애플리케이션 간의 소통
    - WAF, Load Balancer
- 표현 계층 - 데이터를 어떻게 표현할지, 암호화, 압축 등
- 세션 계층 - 통신을 설정, 관리, 종료
- 전송 계층 - 신뢰성 있는 정확한 데이터 전달
- 네트워크 계층 - 네트워크 장치 간의 경로 선택과 데이터 전송
    - 라우터, ISP, IDS
- 데이터 링크 계층 - 물리적인 연결을 통해 오류 없는 데이터 전달
    - MAC, 스위치
- 물리 계층 - 전시 신호를 통해 통신 케이블로 데이터 전송
    - 아날로그 신호 → 디지털 신호(전기)
- 송신자 관점에선 응용 계층에서 시작된 통신이 물리 계층에서 끝남 (수신자는 반대로)
- 계층마다 데이터를 부르는 용어가 다르고, 한 단계 별로 통신을 위한 정보(헤더)가 추가로 붙는다
    - 전송 - **세그먼트(데이터 + 포트번호)**
    - 네트워크 - **패킷(세그먼트 + 보내는 사람의 IP 주소 + 받는 사람의 IP 주소)**
    - 데이터 링크 - **프레임(패킷 + 보내는 사람의 MAC 주소 + 받는 사람의 MAC 주소 + 트레일러)**
        - **트레일러(Trailer)**는 데이터의 끝부분에 추가되는 정보로, **데이터 무결성을 검증하고 전송 오류를 감지하는 역할**
    - 물리 - 랜카드에서 **비트**로 변환
    - 헤더가 추가되는 과정을 **캡슐화**, 분리되는 과정을 **역캡슐화**라고 한다

## 물리 계층

- 컴퓨터들을 물리적으로 연결하거나 데이터를 전기 신호로 변환/제어하는 역할
- 전기 신호: 전압이 일정한 패턴으로 변하여 생기는 일련의 흐름
- 2대의 컴퓨터는 전기 신호들을 주고받음으로써 사진이나 문서 등을 주고받을 수 있다
- 랜 카드가 비트를 전기 신호로 변환하여 밖으로 내보냄
- 케이블이 전기 신호를 전달 = 데이터 신호를 장치 간에 전달
    - UTP(Unshielded Twisted Pair): 케이블을 감싸지 않은 쌍으로 꼬인 선 
    → 전파 간섭을 줄이기 위해 꼬아서 사용
    - FTP(Foiled Twisted Pair): 알루미늄 은박으로 네 가닥의 전선을 감싼 케이블 
    → 절연 기능이 좋기 때문에 공장 배선 용도로 사용
    - STP(Shilded Twisted Pair): 케이블 겉면에 외부 피복이 추가된 것
    → 외부의 잡음을 차단하거나 전기적 신호의 간섭이 줄어듦
- **리피터**: 전기 신호를 증폭하는 기능을 가진 네트워크 장치
    - 거리가 멀어지면 전기 신호가 감쇠되는 것을 고려하여 감쇠된 신호를 재생한다
    - 허브가 리피터의 기능을 겸하기도 한다
- 허브 - 전송되는 데이터 신호를 정형하고 증폭하여 데이터 왜곡을 보정하며, 하나의 입력 신호를 여러 디바이스로 복제하여 데이터 분배 및 네트워크 확장을 지원한다
    - 리피터의 확장 버전
    - 데이터 충돌 처리 역할도 한다
    - 리피터는 1대1 통신, 허브는 포트를 통해 여러 대의 컴퓨터와 통신 지원

## 데이터 링크 계층

- 네트워크에서 데이터를 관리하고 전달하는 역할
- 데이터 전송의 신뢰성과 효율성에 중요한 역할
- 데이터를 프레임 단위로 분할하고, MAC 주소를 활용하여 장비를 식별
- 여러 기기가 동시에 데이터를 전송하려고 하여 신호 충돌이 발생하면 오류를 탐지하고 수정하는 역할
- **회선 제어**: 오류 감지 보다는 회피 방법으로 신호 간 충돌이 발생하지 않도록 제어
    - ENQ(신호의 시작)와 EOT(신호의 끝)을 지정하고, **ACK**(정상 신호) 사용
- **오류 제어**: 송수신 데이터가 외부 간섭, 시간 지연 등에 의해 데이터가 변형되거나 순서가 어긋나는 등의 통신 장애가 발생하지 않도록 오류를 검출하고 정정
    - **패리티 검사** - 보내는 최종 데이터의 1의 개수를 짝수/홀수 개인지 미리 약속하고 여분의 비트(패리티 비트)를 채워 보내는 것
- **흐름 제어**: 송/수신자 간의 데이터 처리 속도 차이를 해결하기 위해 수신자 상황에 따라 데이터 전송량을 조정하는 방법
    - 송신자가 한 단위의 데이터를 전송한 후 다음 데이터를 보내기 전에 응답(ACK)을 기다리는 것
- 이더넷
    - 2대의 컴퓨터가 동시에 데이터를 보낼 때 충돌 방지를 위해 사용하는 것이 CSMA/CD
        - 전류의 강도를 확인해 케이블이 사용 중인지 확인하는 것
        - 케이블이 사용 가능한지 확인(Carrier Sense)
        - 사용 가능하면 데이터를 전송(Multiple Access)
    - 1-persistent: 케이블을 계속 감시하다가 아무도 사용하지 않을 때 즉시 보냄
    - nonpersistent: 케이블을 누군가 사용중이면 감시하지 않고 일정 시간 이후 상태 다시 확인
    - p-persistent: 케이블이 사용 중이면 기다렸다가 다시 상태를 확인하여 아무도 사용중이지 않을 때 일정 확률로 데이터 전송

### 포트 번호

- 애플리케이션을 구분하기 위한 번호
    - 검색은 80번, 이메일은 25번, 암호화 통신은 443번 등

### IP주소

- 인터넷에 연결괸 모든 장치를 식별할 수 있도록 각각의 장치에 부여된 고유 주소
- 중복된 주소 없음
- IPv4(32비트), IPv6(128비트)가 존재
- 인터넷 서비스에 가입하면 할당받는 주소(공인IP)이며, 네트워크 계층에서 사용한다
- 192.168.xxx.xx 와 같은 형식

### MAC 주소

- 하드웨어 장치(랜카드)에 할당된 주소
- 중복된 주소 없음
- 컴퓨터를 구매할 때부터 할당되어 있는 고유번호이며, 데이터 링크 계층에서 사용
- 1C-1B-B5-08-XX-XX 와 같은 형식
- 터미널에서 `ipconfig /all` 을 사용하여 ‘물리적 주소’섹션에서 확인할 수 있다
- **ARP(Address Resolution Protocol)**: IP 주소와 MAC 주소를 매핑해주는 프로토콜
    - 네트워크에서 데이터 패킷을 전송할 때, **IP 주소**만으로는 실제 목적지(장치)를 찾을 수 없고**, MAC 주소**가 필요하기 때문에 사용한다
- LAN 환경 내에서만 확인 가능하다
- WAN 환경에서는 라우터 장비를 거쳐야만 확인할 수 있다

### 스위치

- 허브와 크게 다르지 않음
- 허브에 연결된 모든 컴퓨터에 데이터를 전송하는 것은 비효율적
    - 데이터를 받아야하는 컴퓨터에게만 데이터를 전달하기 위해 스위치가 필요해짐
- MAC 테이블을 관리(특정 포트의 MAC 주소 매핑)
    - 껐다 키면 MAC 테이블 초기화

## 네트워크 계층

- 스위치만으로는 통신할 수 없다
- LAN과 LAN을 연결하는 역할
- **라우터**: 데이터가 어떤 경로로 전달되어야 하는지를 알려주는 내비게이션 역할
- IANA: 전세계 IP 주소를 관리하느 기관(한국은 KISA, 한국인터넷진흥원)
    - IANA로부터 공인 IP 대역을 할당받음
    - KISA가 ISP에 다시 할당해줌
    - ISP가 개인이나 학교/기업에 다시 할당
- IP 주소의 구조
    - 네트워크 ID: 앞부분 (192.168.2.XXX)에서 2까지
    - 호스트 ID: 뒷부분(192.168.2.XXX)에서 XXX
- IP 주소의 클래스:
    - A: 0~127
    - B: 128~191
    - C: 192~223
- **NAT(Network Address Translation)**
    - 공인 IP의 부족과 연결된 단말이 증가하여 제한이 발생
    - LAN 영역(사설 IP)에서 인터넷(공인 IP)으로 나갈때 IP를 변환하는 기술
    - 라우터의 내/외부 통신 과정에서 수행
    - 보안적으로 내부 IP 주소를 숨기고 싶을 때도 사용
    - 외부 → 내부 직접 연결이 불가(포트포워딩 필요)
- **브로드캐스트**
    - 일방적으로 신호를 보낸다는 뜻
    - 같은 네트워크에 속한 모든 컴퓨터에게 데이터를 전달(허브와 유사) - ARP
    - 수신자 입장에서는 원하지 않아도 일방적으로 받아야하기 때문에 매번 그 정보가 필요한지 판단해야 함
- **유니캐스트**
    - 1대1 통신
    - 같은 네트워크에 여러 대의 컴퓨터가 있을 때 특정 1대의 컴퓨터와 통신
- 멀티캐스트
    - 브로드캐스트와 유니캐스트를 섞은 것
    - 특정 그룹을 지정해서 그룹 내 컴퓨터에만 데이터를 보내는 방식

### 서브넷

- 하나의 네트워크를 더 효율적으로 사용하기 위해 탄생한 개념
- 서브넷팅: 하나의 네트워크를 작은 네트워크들로 나누는 작업
    - 서브넷 마스크로 몇 비트까지가 네트워크 ID인지를 알 수 있다
    - CIDR로 표현 - 기본은 맨 뒤에 `/24`
    - 서브넷 마스크는 1이 연속적으로 나온 이후 0이 연속적으로 나온 이후 0으로 채우는 형태
    - 서브넷 마스크에서 1로 채워진 비트의 길이가 네트워크 ID의 길이
    - 서브넷 마스크가 `255.255.192.0` 이라면 네트워크 ID가 26비트 라는 뜻(`/26`)
- IP 주소의 호스트 ID를 쪼개는 방식 - 쪼개는 개수가 적을수록 사용  가능한 호스트 수가 많아진다
- IP의 낭비를 막을 수 있다

### 라우터

- 데이터 전송의 가장 빠른 길을 찾아 네트워크 간의 경로(Route)를 설정하는 장비
- 스위치의 MAC 테이블처럼 라우팅 테이블을 사용 - 데이터를 목적지까지 보내기 위한 거리와 방법을 명시(IP와 인터페이스 등으로 구성)
- **혼잡 제어**: 네트워크로 들어가는 정보량을 조절하여 혼잡 방지
    - 송신자가 먼저 하나의 데이터만 보내고 수신자 측에서 ACK가 오면 전송량을 2배씩 증가시켜 나감
    - 타임아웃 발생하면 데이터를 줄여서 보냄
    - 타임아웃이나 ACK를 여러번 받았다는 것은 네트워크가 바쁘다는 뜻
- **흐름 제어**: 송신자가 하나의 데이터를 전송한 후 다음 데이터를 전달하기 전에 확인 응답을 기다림
- **오류 제어**: 확인 응답과 시간 초과 방법을 사용
    - 수신자 측에서 ACK가 안오면 오류로 판단
    - 특정 시간 내에 ACK가 안오면 세그먼트에 오류가 있다고 판단

## 전송 계층

- 전송 계층은 데이터를 목적지에 문제없이 전달하는 것을 목표
- **연결형 통신**: 데이터를 정확하게 전달하는 것을 목표 - TCP
    - 데이터를 세그먼트로 쪼갠 후 순서를 부여하여 전송
- **비연결형 통신**:  효율적으로 데이터를 보내는 것을 목표 - UDP
    - 데이터 수신 오류 여부와 상관없이 전송
- 전송 계층은 어떤 애플리케이션과 통신하는지 정의 하는 곳 - 포트번호
    - `0~1023`: Well-known 포트
    - `1024~49151`: 기관이나 기업들이 사용(사전 등록 포트)
    - `29152~65535`: 일반 사용자들이 자유롭게 사용(다이나믹/랜덤 포트)
- **일련번호**: 몇번째 데이터인지 헤더에 기록(송신자)
    - 데이터 크기만큼 더해나감
- **확인 응답 번호**: 몇번째 데이터를 받았는지 헤더에 기록(수신자)
- 일련번호와 확인 응답 번호를 통해 오류 검사
- **윈도우 크기**: 송신자가 한번에 보낼 수 있는 데이터의 최대 크기
    - 수신자가 받을 수 있는 데이터의 양은 한정적일 때를 고려
    - 매번 ACK를 기다리는 것보다 윈도우 크기만큼 한 번에 보내면 된다

### 3-way Handshake

- 양쪽 모두 데이터를 전송할 준비가 되었음을 보장
    - 송신자가 수신자에게 SYN라는 임의의 숫자 보냄
    - 수신자는 ACK와 SYN을 보냄
    - 송신자가 ACK를 보냄 이때의 ACK는 SYN+1
    - 여기서의 ACK, SYN 등 상태를 나타내는 비트들을 코드 비트라 한다

### 로드 밸런서

- 여러 대의 서버를 두고 사용자가 한 쪽으로 몰리는 것을 분산시켜주는 장치
- 서버는 1대이고, 접속하려는 동시 접속자가 만 명이라면 서버는 멈춰버릴 것
→ 이 때 필요한 것이 로드 밸런서
- 로드 밸런싱: 부하를 분산시키는 작업
    - 라운드 로빈: 각 서버 별로 돌아가면서 처리
        - 가중치를 부여하여 일부 서버가 트래픽을 몰아 받는 가중 라운드 로빈도 있음
    - 랜덤: 무작위 분배
    - 해시: 특정 클라이언트는 특정 서버에서만 처리
        - JWT, 메모리 기반 캐싱 등
    - 다수의 서버가 골고루 사용자 연결을 처리하는 것이 중요
    - IP, 포트 단위로 분산시킬 수 있음
    - **응용계층에선** 기능 별로 분산시킬 수 있음
- 스케일 아웃: 1대의 서버에서 여러 대로 늘리는 것

## 세션 계층

## 표현 계층

## 응용 계층

- 사용자가 사용하는 응용 프로그램이 동작하는 곳
- 클라이언트에서 서버로 데이터를 보내기 위해 프로토콜을 사용하며 각각 다른 포트 번호 사용
    - HTTP(80), DNS(53), FTP(20), SMTP(25), POP3(110) 등
- 웹 브라우저를 사용한다 = 현재 응용 계층에 있다

### HTTP

- 웹 사이트 접속 시 URL 요청과 응답에 사용
- 클라이언트와 서버가 어떻게 데이터를 교환할지 정해놓은 규칙 - 80번 포트
- 문자 형태로 데이터가 전송되기 때문에 필요한 부분을 파싱해야 함
- 시작 라인: 요청/응답이 어떤 메시지 인지 알려줌
    - HTTP 메서드, 경로, HTTP 버전으로 구성 (`GET /index.html HTTP/1.1`)
- HTTP 메서드: 서버에서 어떤 작업을 해야 하는지 알려주는 용도
    - `GET`, `POST`, `PUT`, `PATCH`, `DELETE`
- 경로: `/`로 구분하여 파일이 위치하는 주소
    - 파일명이 없는 경우엔 자동으로 연결되도록 설정한 것
- 버전 - 1.0, 1.1, 2.0 순
    - 요청마다 연결 수립을 반복하니 성능 저하로 이어짐(1.0 버전)
    - 1.1 버전부터 Keepalive 기능이 추가되어 연결이 한번 수립되면 데이터 교환을 마칠 때까지 연결을 유지하는 구조로 변경
    - 2.0부터는 응용 계층에 바이너리 프레임을 추가하여 데이터를 바이너리로 변환하여 분할하여 보내는 구조 - 빠른 전송 속도와 낮은 오류 발생률
- **헤더**에 통신을 위한 부가정보를 포함
    - `호스트`: 서버의 도메인 이름과 포트번호
    - `연결`: 작업 이후에도 네트워크 연결 여부 제어
    - `언어`: 서버가 응답에 사용할 언어
- **바디**에 데이터를 포함
- HTTPS 인증서는 여러 종류가 있고 비용도 제각각
    - 비쌀수록 보안이 뚫렸을 때 보험이 크다

### DNS 서버

- 네트워크에서 IP 주소와 MAC 주소로 통신을 하는데 문제가 생긴다
→ 우리 모두 상대방의 IP 주소를 알아야 한다는 것(`tracert`로 도메인의 IP 알 수 있음)
- IP 주소를 도메인 주소로 변경해주는 것이 DNS 서버
    - 사용자가 도메인을 웹 브라우저에 입력
    - 요청을 DNS 서버로 전달 → DNS 서버가 대응하는 IP 주소를 전달
        - DNS 서버가 모를 땐 다른 DNS 서버에 질의
    - 사용자가 다시 IP 주소를 이용해 접속
    - 해당 IP 주소를 가진 웹 서버가 요청에 응답

### DHCP 서버

- 일반 적으로 인터넷을 사용하거나 다른 컴퓨터와 통신하기 위해 IP는 명시적으로 내 컴퓨터에 할당되어 있어야 한다
- DHCP 서버가 자동으로 IP 주소를 할당하거나 회수한다

### SMTP & POP3

- 이메일 송신자는 SMTP, 수신자는 POP3 프로토콜을 사용한다
- 메일 서버와 수신자 간 통신
    - 사용자가 110번 포트로 메일 서버에 연결

# VPN(Virtual Private Network, 가상사설망)

- 터널링을 통해  공인 IP로 사설 IP를 이용할 수 있게 하는 것
- 네트워크 트래픽을 **암호화하여 보안성을 높이고**, 원격에서 사설 네트워크 리소스를 사용할 수 있도록 함
- **VPN의 동작 방식**
    1.  사용자는 인터넷을 통해 VPN 서버에 접속
    2.  VPN 서버가 사용자의 트래픽을 암호화하여 안전한 터널링 생성
    3. VPN 서버가 사용자를 사설 네트워크 내부에서 접속한 것처럼 처리
    4. 사용자는 사설 IP를 할당받고 내부 네트워크 리소스 사용 가능

# TCP/IP 4계층

- OSI 7계층은 이론적 모델, TCP/IP 4계층은 실제 인터넷에서 사용하는 모델
- 응용 계층: 사용자와 직접 상호 작용 - OSI 7~5계층(응용, 표현, 세션)
- 전송 계층: 통신 연결, 데이터 전달 - OSI 4계층(전송)
- 인터넷 계층: 네트워크간 데이터 전송 - OSI 3계층(네트워크)
- 네트워크 인터페이스 계층: 물리적 데이터 전송 - OSI 1,2 계층(물리, 데이터 링크)